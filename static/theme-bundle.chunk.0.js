(window.webpackJsonpWebpackChiara=window.webpackJsonpWebpackChiara||[]).push([[0],{588:function(t,i,n){"use strict";n.r(i),function(t){n.d(i,"initBrandPage",(function(){return p})),n.d(i,"initCategoryPage",(function(){return l})),n.d(i,"initBrandsPage",(function(){return d})),n.d(i,"initSearchPage",(function(){return h}));var e=n(63),o=n.n(e),a=n(35),s=n.n(a),r=n(4),c=function(){function i(t,i,n){this.options=s()({},{containerSelector:".productGrid",paginationSelector:".pagination",nextLinkSelector:".pagination-item--next .pagination-link",loadingClass:"is-loading",threshold:100,appendSelector:".product",template:"chiara/category/ajax-product-listing",config:{}},i),this.$scope=t,this.context=n,this.isRequesting=!1,this.onScroll=this.onScroll.bind(this),this.bindEvents()}var n=i.prototype;return n.bindEvents=function(){t(window).on("scroll",o()(this.onScroll,200))},n.onScroll=function(){if(!this.isRequesting){var i=t(this.options.paginationSelector,this.$scope),n=t(this.options.nextLinkSelector,i);if(0!==n.length){var e=n.offset().top-this.options.threshold,o=t(window).scrollTop(),a=o+t(window).height();if(e>=o&&e<=a){var s=n.attr("href").replace(/&?limit=[0-9]+/,"")+"&limit="+this.context.themeSettings.products_per_page;this.request(s)}}}},n.request=function(i){var n=this,e=t(this.options.containerSelector,this.$scope),o=t(this.options.paginationSelector,this.$scope);this.isRequesting=!0,o.addClass(this.options.loadingClass),e.addClass(this.options.loadingClass),r.a.getPage(i,{template:this.options.template,config:this.options.config},(function(i,a){if(n.isRequesting=!1,o.removeClass(n.options.loadingClass),e.removeClass(n.options.loadingClass),i)return i;var s=t(a),r=t(n.options.appendSelector,s);r.length>0&&e.append(r);var c=s.find(n.options.paginationSelector);o.empty().append(c.children())}))},i}();function p(i){t("[data-brand-infinite-scroll]").each((function(n,e){new c(t(e),{template:"chiara/brand/ajax-product-listing",config:{brand:{products:{limit:parseInt(i.themeSettings.products_per_page,10)}}}},i)}))}function l(i){t("[data-category-infinite-scroll]").each((function(n,e){new c(t(e),{config:{category:{products:{limit:parseInt(i.themeSettings.products_per_page,10)}}}},i)}))}function d(i){t("[data-brands-infinite-scroll]").each((function(n,e){new c(t(e),{containerSelector:".brandGrid",appendSelector:".brand",template:"chiara/brand/ajax-brand-listing",config:{brands:{limit:parseInt(i.themeSettings.products_per_page,10)}}},i)}))}function h(i){t("[data-search-infinite-scroll]").each((function(n,e){new c(t(e),{template:"chiara/search/ajax-product-listing",config:{product_results:{limit:parseInt(i.themeSettings.products_per_page,10)}}},i)}))}i.default=c}.call(this,n(2))}}]);
//# sourceMappingURL=theme-bundle.chunk.0.js.map